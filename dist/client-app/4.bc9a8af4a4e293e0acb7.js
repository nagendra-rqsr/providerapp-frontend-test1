(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{kY2p:function(t,e,i){"use strict";i.r(e),i.d(e,"ManagerModule",function(){return J});var r=i("ofXK"),o=i("tyNb"),s=i("AytR"),c=i("fXoL"),n=i("F5nt"),a=i("3Pt+");function b(t,e){if(1&t&&(c.Kb(0,"option",13),c.cc(1),c.Jb()),2&t){const t=e.$implicit;c.Wb("value",t.id),c.xb(1),c.dc(t.doctor_name)}}function d(t,e){1&t&&(c.Kb(0,"div",14),c.cc(1,"Select a doctor"),c.Jb())}function l(t,e){1&t&&(c.Kb(0,"div",14),c.cc(1,"Email required"),c.Jb())}function g(t,e){1&t&&(c.Kb(0,"div",14),c.cc(1,"Enter a valid email address"),c.Jb())}let u=(()=>{class t{constructor(t,e){this.appService=t,this.router=e,this.EMAIL_REGEXP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,this.register_doctor={manager_id:"",doctor_id:"",doctor_name:"",site_id:"",email:"",password:""},this.doctors=[],this.manager=null,this.sites=[],this.site_value="",this.ferror={doctor:!1,email:!1,valid_email:!1}}ngOnInit(){let t=sessionStorage.getItem("MGR_USR");if(t){if(this.manager=JSON.parse(t),this.register_doctor.manager_id=this.manager.manager_id,s.a.production){const t=this.appService.all_sites.find(t=>{var e;return t.id==(null===(e=this.manager)||void 0===e?void 0:e.site_id)});t&&(this.site_value=t.name)}else this.site_value="BP"+this.manager.site_id;this.register_doctor.site_id=this.site_value,this.getDoctors()}else this.router.navigate(["/"])}getDoctors(){this.appService.getAllDoctors(this.register_doctor.site_id).subscribe(t=>{this.doctors=t})}getSites(){this.appService.getSites().subscribe(t=>{this.sites=t})}onRegister(){if(this.ferror={doctor:!1,email:!1,valid_email:!1},!this.register_doctor.doctor_id)return void(this.ferror.doctor=!0);if(!this.register_doctor.email)return void(this.ferror.email=!0);if(!this.EMAIL_REGEXP.test(this.register_doctor.email))return void(this.ferror.valid_email=!0);const t=this.doctors.find(t=>t.id==this.register_doctor.doctor_id);t&&(this.register_doctor.doctor_name=t.doctor_name),this.appService.registerDoctor(this.register_doctor).subscribe(t=>{this.router.navigate(["/manager/registered-doctors"])},t=>alert("failed to register"))}}return t.\u0275fac=function(e){return new(e||t)(c.Hb(n.a),c.Hb(o.a))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-add-registered-doctors"]],decls:25,vars:6,consts:[[1,"container-fluid","mt-3"],[1,"row"],[1,"col-md-3","offset-md-4"],[1,"card","card-body","bg-light"],[1,"mb-3","text-center","text-secondary"],[1,"form-group"],[1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],["type","button","routerLink","/manager/registered-doctors",1,"btn","btn-secondary","btn-block"],[3,"value"],[1,"text-danger"]],template:function(t,e){1&t&&(c.Kb(0,"div",0),c.Kb(1,"div",1),c.Kb(2,"div",2),c.Kb(3,"div",3),c.Kb(4,"h5",4),c.cc(5,"Register Doctor"),c.Jb(),c.Kb(6,"div",5),c.Kb(7,"label"),c.cc(8,"Doctor"),c.Jb(),c.Kb(9,"select",6),c.Rb("ngModelChange",function(t){return e.register_doctor.doctor_id=t}),c.Kb(10,"option",7),c.cc(11,"Select Doctor"),c.Jb(),c.bc(12,b,2,2,"option",8),c.Jb(),c.bc(13,d,2,0,"div",9),c.Jb(),c.Kb(14,"div",5),c.Kb(15,"label"),c.cc(16,"Email"),c.Jb(),c.Kb(17,"input",10),c.Rb("ngModelChange",function(t){return e.register_doctor.email=t}),c.Jb(),c.bc(18,l,2,0,"div",9),c.bc(19,g,2,0,"div",9),c.Jb(),c.Kb(20,"div",5),c.Kb(21,"button",11),c.Rb("click",function(){return e.onRegister()}),c.cc(22,"Register"),c.Jb(),c.Kb(23,"button",12),c.cc(24,"Cancel"),c.Jb(),c.Jb(),c.Jb(),c.Jb(),c.Jb(),c.Jb()),2&t&&(c.xb(9),c.Wb("ngModel",e.register_doctor.doctor_id),c.xb(3),c.Wb("ngForOf",e.doctors),c.xb(1),c.Wb("ngIf",e.ferror.doctor),c.xb(4),c.Wb("ngModel",e.register_doctor.email),c.xb(1),c.Wb("ngIf",e.ferror.email),c.xb(1),c.Wb("ngIf",e.ferror.valid_email))},directives:[a.f,a.c,a.d,a.e,a.g,r.i,r.j,a.a,o.b],styles:[""]}),t})();function f(t,e){if(1&t&&(c.Kb(0,"div",3),c.Kb(1,"h3"),c.cc(2),c.Ub(3,"uppercase"),c.Jb(),c.Jb()),2&t){const t=c.Tb();c.xb(2),c.ec("Welcome to ",c.Vb(3,1,t.site_value)," ProviderApp")}}function p(t,e){1&t&&c.Ib(0,"span",17)}function h(t,e){1&t&&c.Ib(0,"span",18)}function m(t,e){if(1&t){const t=c.Lb();c.Kb(0,"tr"),c.Kb(1,"td"),c.cc(2),c.Jb(),c.Kb(3,"td"),c.cc(4),c.Jb(),c.Kb(5,"td"),c.cc(6),c.Jb(),c.Kb(7,"td"),c.cc(8),c.Ub(9,"date"),c.Jb(),c.Kb(10,"th",14),c.Rb("click",function(){c.Yb(t);const i=e.$implicit;return c.Tb().onIsActiveToggle(i)}),c.bc(11,p,1,0,"span",15),c.bc(12,h,1,0,"span",16),c.Jb(),c.Jb()}if(2&t){const t=e.$implicit;c.xb(2),c.dc(t.doctor_id),c.xb(2),c.dc(t.doctor_name),c.xb(2),c.dc(t.email),c.xb(2),c.dc(c.Vb(9,6,t.created_on)),c.xb(3),c.Wb("ngIf",t.isActive),c.xb(1),c.Wb("ngIf",!t.isActive)}}const v=[{path:"",component:(()=>{class t{constructor(t){this.appService=t,this.manager=null,this.site_value=""}ngOnInit(){const t=sessionStorage.getItem("MGR_USR");if(t)if(this.manager=JSON.parse(t),s.a.production){const t=this.appService.all_sites.find(t=>{var e;return t.id==(null===(e=this.manager)||void 0===e?void 0:e.site_id)});t&&(this.site_value=t.name)}else this.site_value="BP"+this.manager.site_id}}return t.\u0275fac=function(e){return new(e||t)(c.Hb(n.a))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-manager"]],decls:4,vars:1,consts:[[1,"top-bar","text-center"],[1,"d-inline-block","py-3"],["class","d-inline-block text-secondary","routerLink","/manager/registered-doctors",4,"ngIf"],["routerLink","/manager/registered-doctors",1,"d-inline-block","text-secondary"]],template:function(t,e){1&t&&(c.Kb(0,"div",0),c.Kb(1,"div",1),c.bc(2,f,4,3,"div",2),c.Jb(),c.Jb(),c.Ib(3,"router-outlet")),2&t&&(c.xb(2),c.Wb("ngIf",e.manager))},directives:[r.j,o.d,o.b],pipes:[r.m],styles:[""]}),t})(),children:[{path:"",redirectTo:"registered-doctors",pathMatch:"full"},{path:"registered-doctors",component:(()=>{class t{constructor(t,e){this.appService=t,this.router=e,this.registered_doctors=[],this.isActiveDirty=!1,this.site_value=""}ngOnInit(){let t=sessionStorage.getItem("MGR_USR");t||this.router.navigate(["/"]);let e=JSON.parse(t);if(s.a.production){const t=this.appService.all_sites.find(t=>t.id==(null==e?void 0:e.site_id));t&&(this.site_value=t.name)}else this.site_value="BP"+e.site_id;this.getResiteredDoctors()}getResiteredDoctors(){this.appService.getRegisteredDoctors(this.site_value).subscribe(t=>{this.registered_doctors=t})}onRegisterDoctor(){this.router.navigate(["/manager/register-doctor"])}signOut(){sessionStorage.clear(),this.router.navigate(["/"])}onIsActiveToggle(t){t.isActive=!t.isActive,this.isActiveDirty=!0}submit(){this.appService.updateRegisteredDoctors(this.registered_doctors).subscribe(t=>{alert("updated"),this.getResiteredDoctors()})}}return t.\u0275fac=function(e){return new(e||t)(c.Hb(n.a),c.Hb(o.a))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-registered-doctors"]],decls:30,vars:2,consts:[[1,"container-fluid","mt-3"],[1,"row","mt-3"],[1,"col-md-3"],[1,"form-group","mt-5"],["type","button",1,"btn","btn-primary","w-170",3,"click"],[1,"form-group"],[1,"btn","btn-primary","w-170",3,"click"],[1,"col-md-8"],[1,"mb-3","text-secondary"],[1,"table","table-bordered"],[1,"bg-light"],[4,"ngFor","ngForOf"],[1,"form-group","text-center"],[1,"btn","btn-primary","w-170",3,"disabled","click"],[1,"text-center",3,"click"],["class","fa fa-toggle-on fa-lg text-primary",4,"ngIf"],["class","fa fa-toggle-off fa-lg text-secondary",4,"ngIf"],[1,"fa","fa-toggle-on","fa-lg","text-primary"],[1,"fa","fa-toggle-off","fa-lg","text-secondary"]],template:function(t,e){1&t&&(c.Kb(0,"div",0),c.Kb(1,"div",1),c.Kb(2,"div",2),c.Kb(3,"div",3),c.Kb(4,"button",4),c.Rb("click",function(){return e.onRegisterDoctor()}),c.cc(5," Register New Doctor "),c.Jb(),c.Jb(),c.Kb(6,"div",5),c.Kb(7,"button",6),c.Rb("click",function(){return e.signOut()}),c.cc(8,"Sign Out"),c.Jb(),c.Jb(),c.Jb(),c.Kb(9,"div",7),c.Kb(10,"h4",8),c.cc(11,"List of Registered Doctors"),c.Jb(),c.Kb(12,"table",9),c.Kb(13,"thead",10),c.Kb(14,"tr"),c.Kb(15,"th"),c.cc(16,"Doctor ID"),c.Jb(),c.Kb(17,"th"),c.cc(18,"Doctor Name"),c.Jb(),c.Kb(19,"th"),c.cc(20,"Email"),c.Jb(),c.Kb(21,"th"),c.cc(22,"Registered On"),c.Jb(),c.Kb(23,"th"),c.cc(24,"Is Active"),c.Jb(),c.Jb(),c.Jb(),c.Kb(25,"tbody"),c.bc(26,m,13,8,"tr",11),c.Jb(),c.Jb(),c.Jb(),c.Jb(),c.Kb(27,"div",12),c.Kb(28,"button",13),c.Rb("click",function(){return e.submit()}),c.cc(29,"Submit"),c.Jb(),c.Jb(),c.Jb()),2&t&&(c.xb(26),c.Wb("ngForOf",e.registered_doctors),c.xb(2),c.Wb("disabled",!e.isActiveDirty))},directives:[r.i,r.j],pipes:[r.d],styles:[""]}),t})()},{path:"register-doctor",component:u}]}];let _=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)},imports:[[o.c.forChild(v)],o.c]}),t})(),J=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)},imports:[[r.b,a.b,_]]}),t})()}}]);